:root{
  /* Futurista / premium oscuro (UI only)
     “El rediseño es 100% visual (UI only).
      No se debe modificar ningún estado, lógica, evento ni flujo funcional de la aplicación.” */

  /* Paleta base (exacta) */
  --bg: #0B0F14;              /* fondo principal */
  --surface: #121A22;         /* superficies/tarjetas */
  --primary: #4FD1FF;         /* cyan luminoso */
  --text: #EAF2F8;            /* blanco suave */
  --muted: #8A9BA8;           /* texto secundario */

  /* Compatibilidad con estilos existentes */
  --ice: var(--primary);
  --ice2: #1FB9FF;
  --red: #8A0F1D;
  --red2: #FF2B4A;

  --track: rgba(234,242,248,0.10);
  --glass: rgba(18,26,34,0.62);
}

*{ box-sizing: border-box; }
html,body{ height: 100%; }
body{
  /* UI only: gris difuminado con oscuridades negras (sin cambiar funcionalidad) */
  background:
    radial-gradient(1100px 680px at 50% -160px, rgba(79,209,255,0.10), rgba(11,15,20,0) 60%),
    radial-gradient(900px 520px at 18% 26%, rgba(79,209,255,0.05), rgba(11,15,20,0) 62%),
    radial-gradient(900px 620px at 70% 55%, rgba(18,26,34,0.55), rgba(11,15,20,0) 70%),
    linear-gradient(180deg, rgba(18,26,34,0.20), rgba(11,15,20,0.85) 55%, rgba(11,15,20,1)),
    var(--bg);
  color: var(--text);
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", system-ui, sans-serif;
  overflow: hidden;
  overscroll-behavior: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}

.app{
  height: 100%;
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  touch-action: pan-y;
  /* Deja espacio real para la barra superior (notch + botones). */
  padding-top: calc(env(safe-area-inset-top) + 78px);
  padding-bottom: calc(env(safe-area-inset-bottom) + 28px);
}


.topbar{
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 20;
  display:flex;
  align-items:center;
  justify-content: flex-end;
  gap: 10px;
  padding: calc(env(safe-area-inset-top) + 10px) 14px 10px;
  background: linear-gradient(to bottom, rgba(11,15,20,0.92), rgba(11,15,20,0));
  backdrop-filter: blur(12px);
}
.topbar-actions{
  display:flex;
  gap: 10px;
}
.topbar-btn{
  display:flex;
  align-items:center;
  justify-content:center;
  gap: 8px;
  width: 44px;
  height: 44px;
  padding: 0;
  border-radius: 16px;
  border: 1px solid rgba(234,242,248,0.10);
  background: rgba(18,26,34,0.35);
  color: rgba(234,242,248,0.90);
  font-weight: 700;
  font-size: 13px;
  backdrop-filter: blur(12px);
  box-shadow: 0 0 0 1px rgba(234,242,248,0.02) inset;
  -webkit-tap-highlight-color: transparent;
  transition: transform .28s ease, border-color .28s ease, background .28s ease;
}
.topbar-btn:active{ transform: scale(0.99); }
.topbar-ic{
  width: 18px;
  height: 18px;
  display:flex;
  align-items:center;
  justify-content:center;
  opacity: 0.85;
}
.topbar-tx{
  /* oculto visualmente para no tapar el aro, pero accesible */
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}
.hero{
  padding: 22px 16px 10px;
  display:flex;
  justify-content:center;
  align-items:center;
}

.ring{
  position: relative;
  width: min(82vw, 360px);
  aspect-ratio: 1/1;
  border: 0;
  background: transparent;
  padding: 0;
  border-radius: 999px;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  outline: none;
}

.ring-ambient{
  position:absolute;
  inset:-18%;
  border-radius:999px;
  opacity: .75;
  filter: blur(24px);
  background: radial-gradient(circle at 50% 55%,
    rgba(79,209,255,0.20) 0%,
    rgba(79,209,255,0.06) 32%,
    rgba(11,15,20,0) 72%);
  transition: background .32s ease, opacity .32s ease;
  pointer-events:none;
}


/* Halo dinámico (OPCIÓN 3) - UI only: energía suave alrededor del aro */
.ring-halo{
  position:absolute;
  inset:-10%;
  border-radius:999px;
  pointer-events:none;
  opacity: .55;
  filter: blur(18px);
  background: radial-gradient(circle at 50% 50%,
    rgba(79,209,255,0.22) 0%,
    rgba(79,209,255,0.10) 28%,
    rgba(79,209,255,0.00) 62%);
  transform: scale(0.98);
  animation: haloPulse 2.6s ease-in-out infinite;
  mix-blend-mode: screen;
}

@keyframes haloPulse{
  0%,100%{ transform: scale(0.97); opacity: .42; }
  50%{ transform: scale(1.02); opacity: .68; }
}

/* Ajuste por estado (sin tocar lógica) */
.ring[data-mode="normal"] .ring-halo{
  background: radial-gradient(circle at 50% 50%,
    rgba(79,209,255,0.22) 0%,
    rgba(79,209,255,0.10) 28%,
    rgba(79,209,255,0.00) 62%);
}

.ring[data-mode="overtime"] .ring-halo{
  background: radial-gradient(circle at 50% 50%,
    rgba(255,43,74,0.22) 0%,
    rgba(255,43,74,0.10) 28%,
    rgba(255,43,74,0.00) 62%);
  opacity: .62;
  filter: blur(20px);
}

.ring-svg{
  position:absolute;
  inset:0;
  transform: rotate(-90deg);
}

.ring-track,
.ring-progress{
  fill: none;
  /* UI only: aro menos grueso (más premium) */
  stroke-width: 12;
}

/* UI only: el track es un circulo completo; con linecap:round puede aparecer un "punto"/seam
   en algunos navegadores (iOS/Safari). Lo dejamos en butt para evitar ese artefacto visual. */
.ring-track{ stroke-linecap: butt; }
.ring-progress{ stroke-linecap: butt; }

.ring-track{ stroke: rgba(234,242,248,0.12); }

.ring-progress{
  /* gradient definido en el SVG (UI only) */
  stroke: url(#ringCyan);
  filter: url(#glowIce);
  stroke-dasharray: 490;
  stroke-dashoffset: 490;
  transition: stroke .32s ease, filter .32s ease;
}




.ring-content{
  position:absolute;
  inset: 18%;
  border-radius: 999px;
  background: radial-gradient(circle at 50% 38%,
    rgba(18,26,34,0.92),
    rgba(18,26,34,0.55));
  border: 1px solid rgba(234,242,248,0.10);
  box-shadow:
    0 0 0 1px rgba(234,242,248,0.02) inset,
    0 22px 70px rgba(0,0,0,0.78);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap: 10px;
  backdrop-filter: blur(14px);
}

.ring-state{
  font-weight: 700;
  letter-spacing: .12em;
  font-size: 12px;
  color: rgba(234,242,248,0.80);
}

.ring-time{
  font-weight: 800;
  font-size: clamp(42px, 8.6vw, 62px);
  line-height: 1;
}

.ring-end{
  font-size: 13px;
  font-weight: 500;
  letter-spacing: .02em;
  color: rgba(138,155,168,0.92);
}

.ring-meta{
  font-size: 14px;
  color: rgba(138,155,168,0.88);
}

.ring[data-mode="normal"] .ring-progress{ stroke: url(#ringCyan); filter: url(#glowIce); }
.ring[data-mode="normal"] .ring-ambient{
  background: radial-gradient(circle at 50% 55%,
    rgba(79,209,255,0.20) 0%,
    rgba(79,209,255,0.06) 32%,
    rgba(11,15,20,0) 72%);
}

.ring[data-mode="overtime"] .ring-progress{ stroke: url(#ringRed); filter: url(#glowRed); }.ring[data-mode="overtime"] .ring-ambient{
  background: radial-gradient(circle at 50% 55%,
    rgba(255,43,74,0.25) 0%,
    rgba(138,15,29,0.12) 35%,
    rgba(11,15,20,0) 72%);
  opacity: .95;
}

.ring:active .ring-content{
  transform: scale(0.985);
  transition: transform .08s ease;
}

.below-hero{
  padding: 10px 16px 6px;
  display:flex;
  justify-content:center;
}

.pill-btn{
  width: min(82vw, 360px);
  padding: 18px 18px;
  border-radius: 999px;
  border: 1px solid rgba(234,242,248,0.10);
  background: rgba(18,26,34,0.62);
  color: var(--text);
  font-weight: 650;
  letter-spacing: .01em;
  backdrop-filter: blur(14px);
  box-shadow:
    0 0 0 1px rgba(234,242,248,0.02) inset,
    0 16px 40px rgba(0,0,0,0.65);
  cursor:pointer;
  -webkit-tap-highlight-color: transparent;
  transition: transform .28s ease, box-shadow .28s ease, border-color .28s ease, background .28s ease;
}
.pill-btn:active{ transform: scale(0.985); }

.pill-btn[data-state="ok"]{
  border-color: rgba(79,209,255,0.30);
  box-shadow:
    0 0 0 1px rgba(79,209,255,0.08) inset,
    0 0 26px rgba(79,209,255,0.14);
}
.pill-btn[data-state="yellow"]{
  border-color: rgba(255,220,80,0.28);
  box-shadow: 0 0 30px rgba(255,220,80,0.12);
}
.pill-btn[data-state="red"]{
  border-color: rgba(255,43,74,0.30);
  box-shadow: 0 0 34px rgba(255,43,74,0.12);
}

/* MODAL */
.modal{ position: fixed; inset: 0; display:none; z-index: 50; }
.modal.is-open{ display:block; }
.modal-backdrop{ position:absolute; inset:0; background: rgba(0,0,0,0.55); backdrop-filter: blur(6px); }

.modal-sheet{
  position:absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: 0;
  width: min(92vw, 420px);
  border-radius: 22px 22px 0 0;
  background: rgba(18,26,34,0.82);
  border: 1px solid rgba(234,242,248,0.10);
  box-shadow: 0 -30px 80px rgba(0,0,0,0.78);
  backdrop-filter: blur(18px);
  /* Allow the sheet content (e.g., Personalizar) to scroll on iPhone */
  max-height: calc(100vh - env(safe-area-inset-top) - 12px);
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;

  padding: 10px 14px calc(env(safe-area-inset-bottom) + 18px);
  animation: sheetIn .28s ease-out;
}
@keyframes sheetIn{
  from{ transform: translateX(-50%) translateY(18px); opacity: 0.65; }
  to{ transform: translateX(-50%) translateY(0); opacity: 1; }
}

.modal-grab{ width: 46px; height: 5px; border-radius: 999px; background: rgba(234,242,248,0.14); margin: 6px auto 10px; }
.modal-header{ display:flex; align-items:center; justify-content:space-between; gap: 10px; padding: 4px 2px 12px; }
.modal-title{ font-weight: 760; font-size: 18px; }
.modal-subtitle{ margin-top: 2px; font-size: 13px; color: rgba(138,155,168,0.92); }

.icon-btn{ width: 36px; height: 36px; border-radius: 12px; border: 1px solid rgba(234,242,248,0.10); background: rgba(18,26,34,0.50); color: rgba(234,242,248,0.92); cursor:pointer; backdrop-filter: blur(12px); transition: transform .28s ease, background .28s ease, border-color .28s ease; }
.icon-btn:active{ transform: scale(0.985); }

.step{ padding: 2px 2px 10px; }
.is-hidden{ display:none; }

.bubble-row{ display:flex; gap: 10px; justify-content:space-between; }
.bubble-grid{ display:grid; grid-template-columns: 1fr 1fr; gap: 10px; }

.bubble{
  padding: 14px 14px;
  border-radius: 999px;
  border: 1px solid rgba(234,242,248,0.10);
  background: rgba(18,26,34,0.52);
  color: rgba(234,242,248,0.94);
  font-weight: 680;
  letter-spacing: .01em;
  position: relative;
  overflow:hidden;
  cursor:pointer;
  -webkit-tap-highlight-color: transparent;
  transform: translateY(0);
  transition: transform .28s ease, border-color .28s ease, box-shadow .28s ease, background .28s ease;
}

.bubble-ice{ box-shadow: 0 0 0 1px rgba(79,209,255,0.10) inset, 0 0 22px rgba(79,209,255,0.10); }
.bubble:active{ transform: scale(0.985); }

.bubble.is-selected{
  border-color: rgba(79,209,255,0.55);
  box-shadow: 0 0 0 1px rgba(79,209,255,0.22) inset, 0 0 34px rgba(79,209,255,0.20);
}

.hint{ margin-top: 10px; font-size: 12px; color: rgba(138,155,168,0.88); }

.summary{ margin-top: 10px; display:flex; gap: 8px; flex-wrap: wrap; }
.chip{ padding: 8px 10px; border-radius: 999px; background: rgba(18,26,34,0.50); border: 1px solid rgba(234,242,248,0.08); color: rgba(138,155,168,0.95); font-size: 12px; }

.alert{ margin-top: 10px; padding: 12px; border-radius: 16px; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,43,74,0.22); box-shadow: 0 0 36px rgba(255,43,74,0.10); }
.alert-title{ font-weight: 760; margin-bottom: 6px; }
.alert-msg{ font-size: 13px; color: rgba(255,255,255,0.72); }
.alert-actions{ margin-top: 10px; display:flex; justify-content:flex-end; gap: 10px; }
.btn-ghost{ padding: 10px 12px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.12); background: rgba(255,255,255,0.06); color: rgba(255,255,255,0.88); }
.btn-danger{ padding: 10px 12px; border-radius: 12px; border: 1px solid rgba(255,43,74,0.35); background: rgba(255,43,74,0.14); color: rgba(234,242,248,0.92); }

/* QUEUE */
.queue-wrap{ width: min(86vw, 420px); margin: 12px auto 30px; padding: 0 10px; }
.queue-title{ font-weight: 700; color: rgba(234,242,248,0.86); margin: 12px 2px 8px; }
.queue-list{ display:flex; flex-direction:column; gap: 12px; }

/* Icono tenue cuando está vacía (UI only) */
.queue-list:empty{
  min-height: 120px;
  border-radius: 22px;
  background: rgba(18,26,34,0.26);
  border: 1px solid rgba(234,242,248,0.06);
}
.queue-list:empty::before{
  content: "\25CC";
  display:block;
  text-align:center;
  font-size: 40px;
  color: rgba(138,155,168,0.45);
  padding: 34px 0 10px;
  letter-spacing: .08em;
}
.queue-list:empty::after{
  content: "Sin clientes en espera";
  display:block;
  text-align:center;
  font-size: 13px;
  color: rgba(138,155,168,0.70);
  padding-bottom: 26px;
}

/* VIP SWIPE LIST */
.swipe-item{ position: relative; border-radius: 20px; overflow: hidden; animation: itemIn .22s ease-out; }
@keyframes itemIn{ from{ opacity:0; transform: translateY(10px) scale(0.99);} to{ opacity:1; transform: translateY(0) scale(1);} }

@keyframes itemOut{ from{ opacity:1; transform: translateY(0) scale(1);} to{ opacity:0; transform: translateY(8px) scale(0.985);} }
.swipe-item.is-removing{ animation: itemOut .18s ease-in forwards; }

.swipe-delete{ position:absolute; inset: 0; display:flex; justify-content:flex-end; align-items:stretch; background: rgba(255,43,74,0.22); border: 1px solid rgba(255,43,74,0.22); }
.delete-btn{ width: 110px; border: 0; background: rgba(255,43,74,0.65); color: rgba(255,255,255,0.95); font-weight: 800; letter-spacing: .01em; }

.swipe-content{
  border-radius: 20px;
  border: 1px solid rgba(234,242,248,0.08);
  background: rgba(18,26,34,0.48);
  backdrop-filter: blur(16px);
  padding: 12px 12px;
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: 12px;
  transform: translateX(0);
  transition: transform .28s ease;
  will-change: transform;
}

.swipe-item.is-open .swipe-content{ transform: translateX(-110px); }

.q-left{ display:flex; gap: 10px; flex: 1; min-width:0; }
.q-main{ min-width:0; }
.q-title{ font-weight: 820; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; display:flex; align-items:center; gap:8px; }

.avatar{
  width: 38px;
  height: 38px;
  border-radius: 14px;
  display:flex;
  align-items:center;
  justify-content:center;
  flex: 0 0 auto;
  background: rgba(18,26,34,0.56);
  border: 1px solid rgba(234,242,248,0.08);
  box-shadow: 0 0 24px rgba(79,209,255,0.10);
  color: rgba(234,242,248,0.92);
}

.svc-ic{ display:block; opacity: 0.95; filter: drop-shadow(0 0 10px rgba(79,209,255,0.14)); }

.next-badge{
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 900;
  letter-spacing: .08em;
  color: rgba(234,242,248,0.92);
  background: rgba(79,209,255,0.12);
  border: 1px solid rgba(79,209,255,0.22);
  box-shadow: 0 0 24px rgba(79,209,255,0.16);
}

.q-badges{ margin-top: 6px; display:flex; gap: 8px; flex-wrap: wrap; font-size: 12px; color: rgba(138,155,168,0.95); }
.badge{ padding: 6px 8px; border-radius: 999px; background: rgba(18,26,34,0.42); border: 1px solid rgba(234,242,248,0.07); }

.q-right{ display:flex; flex-direction: column; align-items:flex-end; gap: 6px; flex: 0 0 auto; }
.q-wait{ font-weight: 900; }
.q-times{ font-size: 12px; color: rgba(138,155,168,0.88); text-align:right; }
.chev{ font-size: 18px; color: rgba(138,155,168,0.55); margin-top: 2px; }

.swipe-item.is-next .swipe-content{
  border-color: rgba(79,209,255,0.30);
  box-shadow: 0 0 0 1px rgba(79,209,255,0.10) inset, 0 0 40px rgba(79,209,255,0.10);
  position: relative;
  overflow: hidden;
}

.swipe-item.is-next .avatar{ box-shadow: 0 0 32px rgba(79,209,255,0.18); }

.swipe-item.is-next .swipe-content::after{
  content:"";
  position:absolute;
  inset:-40%;
  background: linear-gradient(120deg,
    rgba(255,255,255,0) 35%,
    rgba(79,209,255,0.10) 50%,
    rgba(255,255,255,0) 65%);
  transform: translateX(-40%);
  animation: sheen 2.4s ease-in-out infinite;
  pointer-events:none;
}
@keyframes sheen{
  0%{ transform: translateX(-40%); opacity: 0; }
  20%{ opacity: 1; }
  55%{ opacity: 1; }
  100%{ transform: translateX(40%); opacity: 0; }
}


/* SETTINGS + LOG (VIP) */

.form{
  display:flex;
  flex-direction:column;
  gap: 12px;
}
.form-group{
  display:flex;
  flex-direction:column;
  gap: 8px;
  padding: 12px;
  border-radius: 16px;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.10);
}
.form-label{
  font-weight: 800;
  color: rgba(255,255,255,0.82);
}
.form-grid{
  display:grid;
  grid-template-columns: 1fr 90px;
  gap: 10px;
  align-items:center;
}
.form-grid .k{
  color: rgba(255,255,255,0.70);
  font-size: 13px;
}
.input{
  width: 100%;
  padding: 10px 10px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(0,0,0,0.25);
  color: rgba(234,242,248,0.92);
  outline: none;
}
.input:focus{
  border-color: rgba(79,209,255,0.35);
  box-shadow: 0 0 0 3px rgba(79,209,255,0.08);
}
.form-actions{
  display:flex;
  justify-content:flex-end;
  gap: 10px;
  margin-top: 10px;
}
.btn-primary{
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(79,209,255,0.30);
  background: rgba(79,209,255,0.10);
  color: rgba(234,242,248,0.92);
  font-weight: 800;
}

.log-summary{
  display:flex;
  gap: 10px;
  margin: 4px 0 10px;
}
.log-card{
  flex: 1;
  padding: 12px;
  border-radius: 16px;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.10);
}
.log-k{
  font-size: 12px;
  color: rgba(255,255,255,0.62);
}
.log-v{
  margin-top: 6px;
  font-weight: 900;
  font-size: 20px;
}
.log-list{
  display:flex;
  flex-direction:column;
  gap: 10px;
}
.log-item{
  padding: 12px;
  border-radius: 16px;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.10);
}
.log-item .t{
  display:flex;
  justify-content:space-between;
  gap: 10px;
  font-weight: 800;
}
.log-item .s{
  margin-top: 6px;
  font-size: 12px;
  color: rgba(255,255,255,0.65);
}

/* ===== SETTINGS + LOG MODALS ===== */
.form-section{ padding: 2px 2px 10px; }
.form-row{ display:flex; justify-content:space-between; align-items:center; gap: 12px; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.06); }
.form-row:last-child{ border-bottom: 0; }
.form-label{ font-weight: 720; color: rgba(255,255,255,0.88); }
.form-input{
  width: 92px;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.06);
  color: rgba(234,242,248,0.92);
  text-align:right;
  font-weight: 750;
  outline: none;
}
.form-input:focus{ border-color: rgba(79,209,255,0.35); box-shadow: 0 0 0 3px rgba(79,209,255,0.12); }

.form-actions{ display:flex; gap: 10px; justify-content:flex-end; padding-top: 10px; }
.btn-primary{
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(79,209,255,0.30);
  background: rgba(79,209,255,0.12);
  color: rgba(234,242,248,0.92);
  font-weight: 800;
}

.log-summary{ display:grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 4px 2px 12px; }
.log-card{
  border-radius: 18px;
  padding: 12px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(12px);
}
.log-k{ font-size: 12px; color: rgba(255,255,255,0.60); }
.log-v{ font-size: 18px; font-weight: 850; margin-top: 4px; }

.log-list{ display:flex; flex-direction:column; gap: 10px; padding: 0 2px; max-height: 44vh; overflow-y: auto; -webkit-overflow-scrolling: touch; }
.log-item{
  border-radius: 18px;
  padding: 12px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(12px);
}
.log-item .t{ display:flex; justify-content:space-between; gap: 10px; font-weight: 800; }
.log-item .s{ margin-top: 6px; font-size: 12px; color: rgba(255,255,255,0.62); }

/* Allow vertical interactions inside sheets */
.modal-sheet{ touch-action: pan-y; }
